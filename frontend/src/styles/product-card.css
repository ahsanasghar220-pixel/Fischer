@layer components {
  /* ========================================
     PRODUCT CARDS - E-commerce specific
     ======================================== */
  .product-card {
    @apply relative bg-white dark:bg-dark-800/50 rounded-2xl overflow-visible
           border border-dark-100 dark:border-dark-700/50
           shadow-lg hover:shadow-2xl
           transition-all duration-300 ease-out;
    display: flex;
    flex-direction: column;
  }

  .product-card:hover {
    @apply -translate-y-2 border-primary-200 dark:border-primary-800;
  }

  .product-card .product-image {
    @apply relative aspect-square overflow-hidden bg-gradient-to-br from-dark-50 to-dark-100 dark:from-dark-800 dark:to-dark-900 rounded-t-2xl;
  }

  .product-card .product-image img {
    @apply w-full h-full object-contain transition-transform duration-700 ease-out;
  }

  .product-card:hover .product-image img {
    @apply scale-110;
  }

  .product-card .product-overlay {
    @apply absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent
           opacity-0 group-hover:opacity-100 transition-opacity duration-300;
  }

  .product-card .product-actions {
    @apply absolute bottom-4 left-4 right-4 flex gap-2 justify-center
           translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100
           transition-all duration-300 delay-100;
  }

  .product-card .product-info {
    @apply p-3 sm:p-4 md:p-5;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .product-card .product-name {
    min-height: 3rem;
  }

  .product-card .product-price {
    margin-top: auto;
    padding-top: 0.75rem;
  }

  .product-card .product-category {
    @apply text-[10px] sm:text-xs font-bold text-primary-600 dark:text-primary-400 uppercase tracking-wider mb-1.5 sm:mb-2;
  }

  .product-card .product-name {
    @apply text-sm sm:text-base font-semibold text-dark-900 dark:text-white
           group-hover:text-primary-600 dark:group-hover:text-primary-400
           transition-colors duration-300 leading-snug break-words;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .product-card .product-price {
    @apply text-lg sm:text-xl font-bold text-dark-900 dark:text-white mt-2 sm:mt-3 flex items-baseline gap-1.5 sm:gap-2;
  }

  .product-card .product-price-old {
    @apply text-xs sm:text-sm font-normal text-dark-400 line-through;
  }

  .product-card .product-badge {
    @apply absolute top-4 left-4 z-10;
  }

  .product-card .product-wishlist {
    @apply absolute top-4 right-4 z-10 p-2 rounded-full
           bg-white/90 dark:bg-dark-800/90 backdrop-blur-sm
           text-dark-600 dark:text-dark-300
           opacity-0 group-hover:opacity-100
           hover:text-red-500 dark:hover:text-red-400 hover:scale-110
           transition-all duration-300;
  }

  /* ========================================
     LIST VIEW LAYOUT
     ======================================== */
  .product-card--list {
    flex-direction: row;
  }

  .product-card--list:hover {
    @apply translate-y-0;
  }

  .product-card--list .product-image {
    aspect-ratio: auto;
    width: 200px;
    min-width: 200px;
    height: 200px;
    @apply rounded-t-none rounded-l-2xl;
  }

  .product-card--list .product-info {
    @apply p-4 md:p-5;
    flex: 1;
    min-width: 0;
  }

  .product-card--list .product-name--list {
    -webkit-line-clamp: 2;
    min-height: auto;
  }

  .product-card--list .product-description-list {
    @apply text-sm text-dark-500 dark:text-dark-400 mt-2 leading-relaxed;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .product-card--list .product-price {
    @apply mt-3;
  }

  .product-card--list .product-actions {
    @apply bottom-3 left-3 right-3;
  }

  .product-card--list .product-badge {
    @apply top-3 left-3;
  }

  .product-card--list .product-wishlist {
    @apply top-3 right-3;
  }

  /* Mobile list view - stack more compactly */
  @media (max-width: 639px) {
    .product-card--list {
      flex-direction: row;
    }

    .product-card--list .product-image {
      width: 130px;
      min-width: 130px;
      height: 130px;
    }

    .product-card--list .product-info {
      @apply p-3;
    }

    .product-card--list .product-description-list {
      display: none;
    }

    .product-card--list .product-actions {
      @apply bottom-2 left-2 right-2;
    }

    .product-card--list .product-actions button {
      @apply py-1.5 px-3 text-xs;
    }

    .product-card--list .product-badge {
      @apply top-2 left-2;
    }

    .product-card--list .product-badge span {
      @apply px-1.5 py-0.5 text-[9px];
    }

    .product-card--list .product-wishlist {
      @apply top-2 right-2 p-1.5;
    }

    .product-card--list .product-wishlist svg {
      @apply w-4 h-4;
    }
  }

  /* ========================================
     TOUCH DEVICE OVERRIDES
     ======================================== */
  /* On touch-primary devices, always show product actions and dots */
  @media (pointer: coarse) {
    .product-card .product-actions {
      @apply translate-y-0 opacity-100;
    }

    .product-card .product-wishlist {
      @apply opacity-100;
    }

    /* Disable 3D tilt transforms on touch */
    .product-card {
      transform: none !important;
    }

    /* Disable decorative hover animations on touch */
    .shine-sweep::before,
    .card-shine::after {
      display: none;
    }

    .hover-glow::before {
      display: none;
    }

    /* Reduce shimmer/glow animations on touch for performance */
    .shimmer-gold,
    .animate-shimmer {
      animation: none;
    }

    /* Skip stagger delays on touch for faster perceived load */
    .stagger-1,
    .stagger-2,
    .stagger-3,
    .stagger-4,
    .stagger-5 {
      animation-delay: 0ms;
    }
  }
}

/* Mobile-First Typography & Product Card Overrides */
@media (max-width: 640px) {
  h1, .mobile-heading-hero {
    @apply text-3xl font-black tracking-tight;
  }

  h2, .mobile-heading-section {
    @apply text-2xl font-black tracking-tight;
  }

  h3 {
    @apply text-xl font-bold;
  }

  /* Larger touch targets on mobile â€” exclude small UI controls */
  button, a[role="button"], input[type="button"], input[type="submit"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Reset min-size for intentionally small buttons */
  .product-card .product-actions button,
  .product-card .product-wishlist,
  [class*="banner"] button,
  [class*="carousel"] button,
  [aria-label="Previous slide"],
  [aria-label="Next slide"],
  [aria-label^="Go to slide"] {
    min-height: 0;
    min-width: 0;
  }

  /* Product cards - simplified on mobile */
  .product-card {
    @apply shadow-sm hover:shadow-md;
    display: flex;
    flex-direction: column;
  }

  .product-card .product-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding-bottom: 1rem;
  }

  .product-card .product-name {
    min-height: 2.5rem;
  }

  .product-card .product-price {
    margin-top: auto;
    padding-top: 0.75rem;
  }

  .product-card .product-wishlist {
    @apply opacity-100 top-2 right-2 w-8 h-8 p-1.5 flex items-center justify-center;
  }

  .product-card .product-wishlist svg {
    @apply w-4 h-4;
  }

  /* Smaller badge on mobile */
  .product-card .product-badge {
    @apply top-2 left-2;
  }

  .product-card .product-badge span {
    @apply px-2 py-0.5 text-[10px];
  }

  /* Compact product info on mobile */
  .product-card .product-info {
    @apply p-3;
  }

  /* Smaller product actions on mobile */
  .product-card .product-actions {
    @apply bottom-3 left-1.5 right-1.5 gap-1;
  }

  /* Extra small Add to Cart button on mobile */
  .product-card .product-actions button {
    @apply py-1 px-2 text-[10px] gap-0.5 font-medium min-h-0;
  }

  .product-card .product-actions button svg {
    @apply w-2.5 h-2.5;
  }

  /* Make Quick View button smaller too */
  .product-card .product-actions button[aria-label="Quick view"] {
    @apply p-1;
  }

  .product-card .product-actions button[aria-label="Quick view"] svg {
    @apply w-3 h-3;
  }

  /* More compact product elements */
  .product-card .product-name {
    @apply text-sm leading-tight;
  }

  .product-card .product-category {
    @apply text-xs;
  }

  .product-card .product-price {
    @apply text-base;
  }
}
